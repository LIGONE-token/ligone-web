<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://hwpeegcsdgxgcybuosfv.supabase.co";
  const SUPABASE_KEY = "sb_publishable_LhuHoUS_DR4o2Pp3aqbNBw_IXwHo2fD";

  const supabaseClient = supabase.createClient(
    SUPABASE_URL,
    SUPABASE_KEY
  );
</script>


  
  <title>Affiliate werden – LIGONE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Affiliate bei LIGONE werden. Teilen statt werben. Keine Kosten, kein Verkauf, keine Verpflichtung." />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://ligone-token.github.io/ligone-web/register.html" />

  <style>
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      background:#0b0f14;
      color:#e8eef6;
      line-height:1.6;
    }
    .wrap{max-width:720px;margin:0 auto;padding:40px 20px}
    h1{font-size:36px;margin-bottom:10px}
    h2{margin-top:28px}
    p{color:#cbd5e1}
    .card{
      background:#111826;
      border:1px solid #1f2a3a;
      border-radius:14px;
      padding:22px;
      margin-top:18px;
    }
    label{display:block;margin-top:14px}
    input{
      width:100%;
      padding:12px;
      margin-top:6px;
      border-radius:10px;
      border:1px solid #1f2a3a;
      background:#0e1524;
      color:#e8eef6;
      font-size:16px;
    }
    button{
      margin-top:18px;
      padding:12px 18px;
      border-radius:12px;
      border:none;
      background:linear-gradient(135deg,#1dd1a1,#10ac84);
      color:#06281f;
      font-size:16px;
      font-weight:600;
      cursor:pointer;
    }
    .muted{font-size:14px;color:#9fb0c3}
    .success{
      margin-top:18px;
      padding:14px;
      border-radius:12px;
      background:#0e1524;
      border:1px solid #1f2a3a;
      display:none;
    }
    footer{margin-top:40px;font-size:14px;color:#9fb0c3}
  </style>
</head>

<body>
<div class="wrap">

  <h1>Affiliate werden</h1>
  <p>Teilen statt werben. Bewusst & fair.</p>

  <div class="card">
    <h2>Was bedeutet Teilnahme?</h2>
    <p>
      Als Affiliate bei LIGONE teilst du keine Werbung und machst keine Versprechen.
      Du teilst eine Idee, damit andere sich selbst ein Bild machen können.
    </p>
    <ul class="muted">
      <li>keine Kosten</li>
      <li>kein Verkauf</li>
      <li>kein KYC</li>
      <li>keine Wallet-Verknüpfung</li>
    </ul>
  </div>

  <div class="card">
    <h2>Registrierung</h2>

    <label for="email">E-Mail-Adresse</label>
    <input id="email" type="email" placeholder="deine@email.de" required />

    <button onclick="register()">Registrieren & Affiliate-ID erhalten</button>

    <p class="muted">Kein Spam. Kein Newsletter. Kein Abo.</p>

    <div id="success" class="success">
      <strong>Registrierung erfolgreich</strong>
      <p>Deine Affiliate-ID wurde erstellt.</p>
      <p><strong>Affiliate-ID:</strong> <span id="affid">AFF-XXXXXX</span></p>
      <p class="muted">
        Deine ID ist automatisch in deinen Share-Links enthalten
        und steuert dein persönliches Dashboard.
      </p>
      <a href="1-token.html">→ Zur 1-Token-Seite</a>
      <p class="muted" style="margin-top:10px">
  Bereits registriert?
  <a href="affiliate-login.html">Zum Affiliate-Login</a>
</p>

    </div>
  </div>

  <footer>
    Keine Anlageberatung. Keine Gewinnversprechen.
  </footer>
</div>

<script>
async function register() {
  const email = document.getElementById("email").value.trim();
  if (!email) return;

  // UI sofort umstellen (keine Technik zeigen)
  document.querySelector("button").disabled = true;
  document.querySelector("button").innerText = "Bitte warten…";

  try {
    const code = "AFF-" + Math.random().toString(36).substring(2,7).toUpperCase();

    // Versuch: Affiliate speichern
    await supabase.from("affiliates").insert([
      { email: email, affiliate_code: code }
    ]);

    // Magic-Link anfordern (egal ob neu oder bestehend)
    await supabase.auth.signInWithOtp({
      email: email,
      options: {
        emailRedirectTo:
          "https://ligone-token.github.io/ligone-web/affiliate-dashboard.html"
      }
    });

  } catch (e) {
    // FEHLER ABSICHTLICH IGNORIEREN (nur intern)
    console.warn("Register backend info:", e);
  }

  // IMMER dieselbe Bestätigung anzeigen
  document.querySelector(".card").innerHTML = `
    <h2>E-Mail wurde gesendet</h2>
    <p>
      Wenn die Adresse <strong>${email}</strong> korrekt ist,
      haben wir dir soeben eine E-Mail mit deinem Login-Link geschickt.
    </p>
    <p class="muted">
      Bitte prüfe dein Postfach (ggf. auch den Spam-Ordner).
      Der Link ist nur kurzzeitig gültig.
    </p>
  `;
}
</script>

</body>
</html>
