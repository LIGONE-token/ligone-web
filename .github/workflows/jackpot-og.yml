name: Jackpot OG Image

on:
  schedule:
    - cron: '0 17 * * *'   # 18:00 Z√ºrich ‚âà 17:00 UTC
  workflow_dispatch:

jobs:
  render:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: microsoft/playwright-github-action@v1

      - run: |
          npx playwright install chromium

      - run: |
          node <<'EOF'
          const { chromium } = require('playwright');
          (async () => {
            const browser = await chromium.launch();
            const page = await browser.newPage({ viewport: { width: 1200, height: 630 } });
            await page.goto('file://' + process.cwd() + '/og/jackpot.html');
            await page.waitForTimeout(1500);
            await page.screenshot({ path: 'og/jackpot.png' });
            await browser.close();
          })();
          EOF

      - run: |
          git config user.name "og-bot"
          git config user.email "bot@users.noreply.github.com"
          git add og/jackpot.png
          git commit -m "üñºÔ∏è Update jackpot OG image" || exit 0
          git push
